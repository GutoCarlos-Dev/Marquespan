<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Monitoramento de Manutenção - Marquespan</title>
  <link rel="stylesheet" href="css/index.css" />
  <link rel="stylesheet" href="css/monitoramento.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
  <!-- Chart.js para os gráficos -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <!-- Plugin Datalabels para exibir valores nos gráficos (opcional, mas recomendado) -->
  <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.0.0"></script>
  <link rel="icon" href="logo.png" type="image/png">
</head>
<body>
  <div class="container">
    <!-- O menu será injetado aqui pelo menu.js -->
    <div id="menu-container"></div>
    
    <div class="main-content">
      <header class="header header-flex">
        <span><i class="fas fa-chart-line"></i> Monitoramento de Manutenção (Real-Time)</span>
        <div class="header-controls">
            <span id="last-update" class="last-update-text">Atualizado às: --:--</span>
            <button id="btn-toggle-sidebar" class="btn-refresh" title="Ocultar/Mostrar Menu"><i class="fas fa-bars"></i></button>
            <button id="btn-fullscreen" class="btn-refresh" title="Tela Cheia"><i class="fas fa-expand"></i></button>
            <button id="btn-refresh" class="btn-refresh" title="Atualizar Agora"><i class="fas fa-sync-alt"></i></button>
        </div>
      </header>

      <section class="section">
        <!-- Filtros de Período -->
        <div class="filter-bar">
            <div class="form-group">
                <label for="dataInicial">De:</label>
                <input type="date" id="dataInicial">
            </div>
            <div class="form-group">
                <label for="dataFinal">Até:</label>
                <input type="date" id="dataFinal">
            </div>
            <button id="btn-aplicar-filtro" class="btn-primary">Aplicar Filtro</button>
        </div>

        <!-- KPIs (Indicadores Chave) -->
        <div class="kpi-grid">
            <div class="kpi-card blue">
                <div class="kpi-icon"><i class="fas fa-tools"></i></div>
                <div class="kpi-info">
                    <h3>Total Manutenções</h3>
                    <p id="kpi-total-qtd">0</p>
                </div>
            </div>
            <div class="kpi-card green">
                <div class="kpi-icon"><i class="fas fa-dollar-sign"></i></div>
                <div class="kpi-info">
                    <h3>Gasto Total (Período)</h3>
                    <p id="kpi-total-valor">R$ 0,00</p>
                </div>
            </div>
            <div class="kpi-card blue1">
                <div class="kpi-icon"><i class="fas fa-hospital"></i></div>
                <div class="kpi-info">
                    <h3>Veículos Internados</h3>
                    <p id="kpi-internados">0</p>
                </div>
            </div>
            <div class="kpi-card purple">
                <div class="kpi-icon"><i class="fas fa-check-double"></i></div>
                <div class="kpi-info">
                    <h3>Finalizados Hoje</h3>
                    <p id="kpi-finalizados-hoje">0</p>
                </div>
            </div>
            <div class="kpi-card red">
                <div class="kpi-icon"><i class="fas fa-exclamation-circle"></i></div>
                <div class="kpi-info">
                    <h3>Total Pendentes</h3>
                    <p id="kpi-pendentes">0</p>
                </div>
            </div>
        </div>

        <!-- Grid de Gráficos -->
        <div class="charts-dashboard">
            <!-- Linha 1 -->
            <div class="chart-container wide">
                <h3><i class="fas fa-calendar-alt"></i> Evolução de Manutenções (Quantidade vs Tempo)</h3>
                <div class="chart-wrapper">
                    <canvas id="chartEvolucao"></canvas>
                </div>
            </div>
        </div>

        <!-- Container de Gráficos com Rolagem Horizontal (Marquee) -->
        <div class="marquee-wrapper">
            <div class="marquee-track" id="marqueeTrack">
                <!-- Os gráficos abaixo serão embaralhados via JS -->
                <div class="chart-container marquee-item">
                    <h3><i class="fas fa-truck"></i> Top 10 Veículos com Maior Custo</h3>
                    <div class="chart-wrapper">
                        <canvas id="chartTopPlacas"></canvas>
                    </div>
                </div>
                <div class="chart-container marquee-item">
                    <h3><i class="fas fa-building"></i> Gastos por Oficina/Empresa</h3>
                    <div class="chart-wrapper">
                        <canvas id="chartOficinas"></canvas>
                    </div>
                </div>
                <div class="chart-container marquee-item">
                    <h3><i class="fas fa-chart-pie"></i> Distribuição de Status</h3>
                    <div class="chart-wrapper">
                        <canvas id="chartStatus"></canvas>
                    </div>
                </div>
                <div class="chart-container marquee-item">
                    <h3><i class="fas fa-clipboard-list"></i> Top 10 Serviços Mais Frequentes</h3>
                    <div class="chart-wrapper">
                        <canvas id="chartTopServicosFreq"></canvas>
                    </div>
                </div>
                <div class="chart-container marquee-item">
                    <h3><i class="fas fa-file-invoice-dollar"></i> Top 10 Serviços por Custo Total</h3>
                    <div class="chart-wrapper">
                        <canvas id="chartTopServicosCusto"></canvas>
                    </div>
                </div>
                <div class="chart-container marquee-item">
                    <h3><i class="fas fa-exclamation-triangle"></i> Veículos Pendentes/Internados</h3>
                    <div class="chart-wrapper">
                        <canvas id="chartPendentesInternados"></canvas>
                    </div>
                </div>
            </div>
        </div>
      </section>
    </div>
  </div>
  <script type="module" src="./script/menu.js" defer></script>
  <script type="module" src="./script/monitoramento.js"></script>
</body>
</html>