<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Cadastro de Rotas - Marquespan</title>
  <link rel="stylesheet" href="css/index.css" />
  <link rel="stylesheet" href="css/rotas.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
  <link rel="icon" href="logo.png" type="image/png">
</head>
<body>
  <div class="container">
    <div id="menu-container">
      <!-- O menu ser치 injetado aqui pelo menu.js -->
    </div>
    <div class="main-content">
      <header class="header glass-header">
        <h1><i class="fas fa-route"></i> Cadastro de Rotas</h1>
      </header>

      <section id="sectionCadastrarRotas" class="glass-panel">
        <h3><i class="fas fa-plus-circle"></i> Formul치rio de Rota</h3>
        <form id="formCadastrarRota">
          <input type="hidden" id="rotaEditingId">
          <div class="rotas-layout">
              <!-- Card de Campos -->
              <div class="glass-panel-inner">
                  <div class="form-grid">
                      <div class="form-group">
                          <label for="rotaNumero">N칰mero da Rota</label>
                          <input type="text" id="rotaNumero" required class="glass-input" placeholder="Ex: 101">
                      </div>
                      <div class="form-group">
                          <label for="rotaSemana">Semana</label>
                          <select id="rotaSemana" required class="glass-input">
                          <option value="" disabled selected>-- Selecione --</option>
                          <option value="SEGUNDA">SEGUNDA</option>
                          <option value="TER칂A">TER칂A</option>
                          <option value="QUARTA">QUARTA</option>
                          <option value="QUINTA">QUINTA</option>
                          <option value="SEXTA">SEXTA</option>
                          <option value="EXTRA">EXTRA</option>
                          <option value="AVULSA">AVULSA</option>
                          </select>
                      </div>
                      <div class="form-group">
                          <label for="rotaResponsavel">Respons치vel</label>
                          <input type="text" id="rotaResponsavel" required class="glass-input" placeholder="Nome do Motorista/Respons치vel">
                      </div>
                      <div class="form-group">
                          <label for="rotaSupervisor">Supervisor</label>
                          <input type="text" id="rotaSupervisor" class="glass-input" placeholder="Nome do Supervisor">
                      </div>
                      <div class="form-group">
                          <label for="rotaCidades">Cidades</label>
                          <input type="text" id="rotaCidades" required class="glass-input" placeholder="Cidades atendidas">
                      </div>
                      <div class="form-group">
                          <label for="rotaDias">Dias</label>
                          <input type="number" id="rotaDias" required class="glass-input" placeholder="Qtd dias">
                      </div>
                  </div>
              </div>

              <!-- Card de Bot칫es -->
              <div class="glass-panel-inner actions-panel">
                  <div class="form-actions-vertical">
                      <button type="submit" id="btnSubmitRota" class="btn-glass btn-green"><i class="fas fa-save"></i> Salvar Rota</button>
                      <button type="button" id="btnImportarLista" class="btn-glass btn-blue"><i class="fas fa-file-import"></i> Importar Lista</button>
                      <button type="button" id="btnClearRotaForm" class="btn-glass btn-red hidden"><i class="fas fa-times"></i> Cancelar</button>
                      <input type="file" id="importFile" accept=".xlsx, .xls" style="display: none;" />
                  </div>
              </div>
          </div>
        </form>

        <hr style="margin: 20px 0; border-color: rgba(0,0,0,0.1);">

        <h3><i class="fas fa-list"></i> Rotas Cadastradas</h3>
        <div class="form-group" style="margin-bottom: 15px;">
            <input type="text" id="searchRotaInput" placeholder="游댌 Buscar por respons치vel, n칰mero ou cidades..." class="glass-input">
        </div>

        <div class="table-responsive rotas-table-container">
            <table class="glass-table data-grid">
                <thead>
                <tr>
                    <th data-field="numero">N칔MERO <i class="fas fa-sort"></i></th>
                    <th data-field="semana">SEMANA <i class="fas fa-sort"></i></th>
                    <th data-field="responsavel">RESPONS츼VEL <i class="fas fa-sort"></i></th>
                    <th data-field="supervisor">SUPERVISOR <i class="fas fa-sort"></i></th>
                    <th data-field="cidades">CIDADES</th>
                    <th data-field="dias">DIAS</th>
                    <th style="width: 100px;">A칂칏ES</th>
                </tr>
                </thead>
                <tbody id="rotasTableBody"></tbody>
            </table>
        </div>

        <!-- Card para o Resumo por Supervisor -->
        <div class="glass-panel" style="margin-top: 20px;">
            <h3><i class="fas fa-chart-pie"></i> Resumo por Supervisor</h3>
            <div id="rotaSummary" class="summary-container">
                <!-- O conte칰do do resumo ser치 inserido aqui pelo JavaScript -->
            </div>
        </div>
      </section>
    </div>
  </div>
  <footer class="footer">춸 2025 Marquespan. Todos os direitos reservados.</footer>
  <script src="https://cdn.jsdelivr.net/npm/xlsx/dist/xlsx.full.min.js" defer></script>
  <script type="module" src="./script/menu.js" defer></script>
  <!-- O script de rotas agora importa o supabase.js diretamente -->
  <script type="module" src="script/rotas.js"></script>
</body>
</html>
