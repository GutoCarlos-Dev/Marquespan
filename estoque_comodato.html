<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Estoque Comodato - Marquespan</title>
  <link rel="stylesheet" href="css/index.css" />
  <link rel="stylesheet" href="css/comodato.css" />
  <link rel="stylesheet" href="css/estoque_comodato.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
  <link rel="icon" href="logo.png" type="image/png">
</head>
<body>
  <div class="container">
    <!-- O menu ser√° injetado aqui pelo menu.js -->
    
    <div class="main-content">
      <header class="header">üì¶ Estoque de Comodato</header>

      <!-- Navega√ß√£o por abas -->
      <div class="painel-navegacao" role="tablist" id="menu-estoque-comodato">
        <button class="painel-btn active" data-secao="sectionLancamento" aria-selected="true">
          <i class="fas fa-exchange-alt"></i> Lan√ßamento de Estoque
        </button>
        <button class="painel-btn" data-secao="sectionResumo" aria-selected="false">
          <i class="fas fa-chart-pie"></i> Resumo do Estoque
        </button>
      </div>

      <!-- SE√á√ÉO: LAN√áAMENTO DE ESTOQUE -->
      <section id="sectionLancamento" class="section">
        <div class="card card-header">
          <h2>Realizar Lan√ßamento</h2>
        </div>

        <!-- Card do Formul√°rio de Cabe√ßalho -->
        <div class="card">
          <form id="formCabecalhoLancamento">
            <table class="form-grid-table">
              <tbody>
                <tr>
                  <td>
                    <div class="form-group">
                      <label for="lancamentoSemana">Semana do Lan√ßamento</label>
                      <input type="text" id="lancamentoSemana" required />
                    </div>
                  </td>
                  <td>
                    <div class="form-group" id="groupDataNota">
                      <label for="entradaDataNota">Data</label>
                      <input type="date" id="entradaDataNota" />
                    </div>
                  </td>
                </tr>
                <tr>
                  <td>
                    <div class="form-group">
                      <label for="tipoOperacao">Tipo de Opera√ß√£o</label>
                      <select id="tipoOperacao" required>
                          <option value="">-- Selecione --</option>
                          <option value="ENTRADA">Entrada de Produto</option>
                          <option value="SAIDA">Sa√≠da de Produto</option>
                          <option value="CONTAGEM">Contagem (Ajuste)</option>
                      </select>
                    </div>
                  </td>
                  <td>
                    <div class="form-group" id="groupNf"><label>N¬∫ da Nota Fiscal</label><input type="text" id="entradaNf" placeholder="N√∫mero da NF" /></div>
                  </td>
                </tr>
              </tbody>
            </table>
          </form>
        </div>

        <!-- Card de Adicionar Itens -->
        <div class="card">
            <form id="formAddItemEstoque" class="form-compact" onsubmit="return false;">
                <fieldset class="form-fieldset" style="border: none; padding: 0;">
                    <legend class="fieldset-legend">Adicionar Item ao Lan√ßamento</legend>
                    <div class="add-item-grid">
                        <div class="form-group">
                            <label for="lancamentoProdutoInput">Produto</label>
                            <input type="text" id="lancamentoProdutoInput" list="listaProdutos" placeholder="Digite para buscar..." required autocomplete="off">
                            <datalist id="listaProdutos"></datalist>
                        </div>
                        <div class="form-group"><label for="lancamentoStatus">Status</label>
                            <select id="lancamentoStatus" required>
                                <option value="Novo">Novo</option>
                                <option value="Usado">Usado</option>
                            </select></div>
                        <div class="form-group"><label for="lancamentoTipoProduto">Tipo</label><input type="text" id="lancamentoTipoProduto" readonly /></div>
                        <div class="form-group"><label for="lancamentoQtd" id="labelQtd">Quantidade</label><input type="number" id="lancamentoQtd" min="0" /></div>
                        <div class="form-group action-button-group">
                            <button type="button" id="btnAdicionarItem" class="btn-primary"><i class="fas fa-plus"></i> Adicionar</button>
                        </div>
                    </div>
                </fieldset>
            </form>
        </div>

        <!-- Card do Carrinho de Lan√ßamento -->
        <div class="card">
            <div class="form-header">
                <h3><i class="fas fa-shopping-cart"></i> Itens do Lan√ßamento</h3>
            </div>
            <div class="table-responsive">
                <table class="data-grid">
                    <thead><tr><th>Produto</th><th>Tipo</th><th>Status</th><th>Quantidade</th><th>A√ß√µes</th></tr></thead>
                    <tbody id="grid-lancamento-atual"><!-- Itens adicionados via JS --></tbody>
                </table>
            </div>
            <div class="form-actions-pneu" style="margin-top: 15px;">
                <button type="button" id="btnSalvarLancamento" class="btn-primary"><i class="fas fa-save"></i> Salvar Lan√ßamento</button>
                <button type="button" id="btnCancelarLancamento" class="btn-muted"><i class="fas fa-times"></i> Cancelar</button>
            </div>
        </div>
      </section>

      <!-- SE√á√ÉO: LAN√áAMENTO DE ESTOQUE -->
      <section id="sectionLancamento" class="section">
        <!-- ... (c√≥digo existente para realizar o lan√ßamento) ... -->

        <!-- Card do Hist√≥rico de Lan√ßamentos -->
        <div class="card" style="margin-top: 20px;">
            <div class="form-header">
                <h3><i class="fas fa-history"></i> Hist√≥rico de Lan√ßamentos</h3>
            </div>
            <div class="table-responsive">
                <table class="data-grid">
                    <thead>
                        <tr>
                            <th>Semana</th>
                            <th>Data/Hora</th>
                            <th>Usu√°rio</th>
                            <th>Data da Nota</th>
                            <th>N¬∫ da Nota</th>
                            <th>Opera√ß√£o</th>
                            <th>Itens</th>
                            <th>A√ß√µes</th>
                        </tr>
                    </thead>
                    <tbody id="grid-historico-lancamentos">
                        <!-- Hist√≥rico carregado via JS -->
                    </tbody>
                </table>
            </div>
        </div>
      </section>

      <!-- SE√á√ÉO: RESUMO DO ESTOQUE -->
      <section id="sectionResumo" class="section hidden">
        <div class="card card-header">
          <h2>Resumo do Estoque Atual</h2>
        </div>

        <div class="card">
            <div class="table-responsive">
              <table class="data-grid">
                <thead>
                  <tr>
                    <th>Produto</th>
                    <th class="text-center">Tipo</th>
                    <th class="text-center">Qtd. Novo</th>
                    <th class="text-center">Qtd. Usado</th>
                    <th class="text-center">Total Geral</th>
                  </tr>
                </thead>
                <tbody id="tableBodyResumoEstoque">
                  <!-- Preenchido via JS -->
                </tbody>
              </table>
            </div>
        </div>
      </section>

    </div>
  </div>
  <script type="module" src="./script/menu.js" defer></script>
  <script type="module" src="./script/estoque_comodato.js"></script>
</body>
</html>