<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>App Engraxe - Marquespan</title>
  <link rel="stylesheet" href="css/buttons.css" />
  <link rel="stylesheet" href="css/mobile-engraxe.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
  <link rel="icon" href="logo.png" type="image/png">
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body>
  <header class="mobile-header">
    <div class="header-content"><img src="logo.png" alt="Logo" class="mobile-logo"><h1>Engraxe</h1></div>
    <a href="engraxe.html" class="btn-desktop-link" title="Voltar para Desktop"><i class="fas fa-desktop"></i></a>
  </header>

  <div class="mobile-container">
    <div class="panel mobile-panel">
      <div class="panel-header"><h3><i class="fas fa-plus-circle"></i> Novo Registro</h3></div>
      <div class="panel-body">
        <form id="formMobileEngraxe">
          <div class="form-group"><label for="placa">Placa</label><input type="text" id="placa" list="listaVeiculos" placeholder="AAA0000" required autocomplete="off" style="text-transform: uppercase;"><datalist id="listaVeiculos"></datalist></div>
          <div class="form-row-mobile">
            <div class="form-group"><label for="km_realizado">KM Atual</label><input type="number" id="km_realizado" placeholder="0" inputmode="numeric" required></div>
            <div class="form-group"><label for="data_realizado">Data</label><input type="date" id="data_realizado" required></div>
          </div>
          <div class="form-group"><label for="status">Status</label><select id="status" required><option value="REALIZADO">REALIZADO</option><option value="PENDENTE">PENDENTE</option></select></div>
          <details>
            <summary>Mais Detalhes (Plaquinha, SEG, Próximo)</summary>
            <div class="form-group" style="margin-top: 10px;"><label for="plaquinha">Plaquinha</label><input type="text" id="plaquinha"></div>
            <div class="form-group"><label for="seg">SEG</label><input type="text" id="seg"></div>
            <div class="form-row-mobile">
                <div class="form-group"><label for="proximo_km">Próx. KM</label><input type="number" id="proximo_km" inputmode="numeric"></div>
                <div class="form-group"><label for="proximo_data">Próx. Data</label><input type="date" id="proximo_data"></div>
            </div>
          </details>
          <div class="form-actions mobile-actions"><button type="submit" class="btn-primary btn-block btn-large"><i class="fas fa-check"></i> SALVAR</button></div>
        </form>
      </div>
    </div>

    <div class="mobile-list-container">
      <h3 style="margin: 20px 0 10px; color: #333; border-bottom: 1px solid #ccc; padding-bottom: 5px;">Últimos Registros</h3>
      <div id="listaHistorico" class="historico-list"><p style="text-align: center; color: #666;">Carregando...</p></div>
    </div>
  </div>

  <script type="module" src="script/mobile-engraxe.js"></script>
  <script>
    const usuarioLogado = localStorage.getItem('usuarioLogado');
    if (!usuarioLogado) { alert('Você precisa fazer login.'); window.location.href = 'index.html'; }
  </script>
</body>
</html>