/* Stylecompras - versão refatorada */
:root{
  --bg:#f5f7f6;
  --panel:#ffffff;
  --brand:#008000;
  --brand-light:#28a745;
  --brand-dark:#005700;
  --brand-contrast:#0b5a0b;
  --muted:#6b6b6b;
  --success:#28a745;
  --danger:#dc3545;
  --shadow-sm: 0 2px 6px rgba(0,0,0,0.06);
  --shadow-md: 0 6px 18px rgba(0,0,0,0.08);
  --radius:12px;
}
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family: Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
  background:var(--bg);
  color:#222;
  -webkit-font-smoothing:antialiased;
}
/* Estilo profissional para a navegação por abas da página de compras */
#menu-compras {
  display: flex;
  border-bottom: 1px solid #e0e0e0;
  margin-bottom: 20px;
}

#menu-compras .painel-btn {
  background-color: transparent;
  border: none;
  border-bottom: 3px solid transparent;
  padding: 14px 18px;
  cursor: pointer;
  color: var(--muted);
  transition: color 0.2s ease-in-out, border-color 0.2s ease-in-out;
}

#menu-compras .painel-btn.active,
#menu-compras .painel-btn:hover {
  color: var(--brand);
  border-bottom-color: var(--brand);
}
.header{
  background:var(--brand);
  color:#fff;
  padding:14px 20px;
  box-shadow:var(--shadow-sm);
}
.header .header-inner{display:flex;align-items:center;gap:16px;max-width:1200px;margin:0 auto}
.logo{height:40px;display:block}
.main-layout{display:grid;grid-template-columns:260px 1fr;gap:20px;max-width:1200px;margin:20px auto;padding:0 16px}
.sidebar {position: fixed;top: 0;left: 0;width: 220px;height: 100vh;background-color: #2e7d32;color: #fff;padding: 20px;transition:transform 0.3s ease,width 0.3s ease;overflow-x: hidden;z-index: 1000;}
.menu-compras{display:flex;flex-direction:column;gap:8px}
.btn-menu-compras{display:flex;align-items:center;gap:10px;padding:12px;border-radius:8px;text-decoration:none;color:var(--brand-dark);background:var(--brand-light);font-weight:600}
.btn-menu-compras i{width:20px;text-align:center}
.btn-menu-compras.active{box-shadow:var(--shadow-md);transform:translateY(-2px)}
.sidebar-footer{font-size:12px;color:var(--muted);margin-top:20px}
.content{padding:0 6px}
.section{margin-bottom:22px}
.card{background:var(--panel);border-radius:var(--radius);padding:16px;box-shadow:var(--shadow-sm);border:1px solid #e9ecef}
.card-header{display:flex;justify-content:space-between;align-items:center;gap:12px}
.card-header h2{margin:0;color:var(--brand)}
.card h3{margin-top:0;margin-bottom:12px;color:var(--brand-contrast)}
.code-and-actions{display:flex;gap:12px;align-items:center}
#quotationCode{padding:8px 10px;border-radius:8px;border:1px solid #ddd;background:#fafafa;width:180px}
.actions{display:flex;gap:8px}
.grid-2{display:grid;grid-template-columns:1fr 1fr;gap:20px}
@media (max-width:980px){.main-layout{grid-template-columns:1fr}.grid-2{grid-template-columns:1fr}.sidebar{order:2}.content{order:1}}
.row{display:flex;gap:8px;align-items:center}
.btn-primary{background:var(--brand);color:#fff;padding:10px 12px;border-radius:8px;border:none;cursor:pointer;transition:background-color 0.2s ease-in-out, transform 0.2s ease-in-out;}
.btn-muted{background:#f0f0f0;color:#333;padding:10px 12px;border-radius:8px;border:1px solid #e6e6e6;cursor:pointer;transition:background-color 0.2s ease-in-out, transform 0.2s ease-in-out;}
.btn-inline{display:inline-flex;align-items:center;gap:8px}
.btn-primary:hover{background:var(--brand-dark);transform:translateY(-1px)}
.btn-muted:hover{background:#e9e9e9}
.btn-success{background:var(--success);color:#fff;border-radius:8px;padding:8px 10px;border:none}
.btn-delete{background:var(--danger);color:#fff;padding:8px 10px;border-radius:8px;border:none;cursor:pointer;transition:background-color 0.2s ease-in-out;}
.btn-delete:hover{background:#b02a37;}
.form-compact input, .form-compact select, .form-compact textarea{width:100%;padding:10px;border-radius:8px;border:1px solid #e6e6e6;background:#fafafa}
.table-responsive{overflow:auto}
.data-grid{width:100%;border-collapse:collapse;margin-top:10px}
.data-grid th,.data-grid td{padding:12px;border:1px solid #f1f1f1;text-align:left;font-size:14px}
.data-grid th{background:linear-gradient(180deg,#fbfbfb,#f3fef3);font-weight:700;color:var(--brand-contrast)}
.data-grid tbody tr{background:#fff}
.data-grid tbody tr:hover{background:#fbfffb}
.card-row{display:flex;gap:12px}
.card-row{align-items:flex-start}
.card-row .company-card{flex:1;padding:16px;border-radius:12px;border:1px solid #eee;background:linear-gradient(180deg,#ffffff,#fbfffb)}
.company-card h4{margin:0 0 8px 0;color:var(--brand-contrast);font-size:16px}
.price-entry{display:flex;flex-direction:column;margin-bottom:8px}
.price-entry input{padding:8px;border-radius:6px;border:1px solid #ddd}
.price-entry label{font-size:13px;margin-bottom:6px;color:var(--muted)}
.winner{border:2px solid var(--brand);box-shadow:0 0 12px rgba(0,128,0,0.08)}
/* Make company card use column layout so footer (winner) aligns bottom */
.card-row .company-card{display:flex;flex-direction:column;justify-content:space-between;min-height:220px}

/* Observações cannot be resized by user */
.company-card textarea{resize:none;min-height:48px;max-height:120px;overflow:auto}

/* Winner selector styled as a button */
.winner-selector{display:flex;align-items:center;gap:8px;margin-top:12px}
.winner-selector input[type="radio"]{position:absolute;opacity:0;width:0;height:0}
.winner-selector label{display:inline-flex;align-items:center;gap:8px;padding:8px 12px;border-radius:8px;border:1px solid #dfe7df;background:#fbfffb;color:var(--brand-contrast);cursor:pointer;font-weight:600}
.winner-selector label:hover{background:#f1fff1}
.winner-selector input[type="radio"]:checked + label{background:var(--brand);color:#fff;border-color:var(--brand-dark);box-shadow:0 4px 10px rgba(2,80,2,0.12)}
.modal-backdrop{position:fixed;inset:0;background:rgba(0,0,0,0.6);display:none;align-items:center;justify-content:center;z-index:999999;pointer-events:auto}
.modal{background:#fff;border-radius:12px;padding:18px;max-width:900px;width:min(900px,92%);box-shadow:var(--shadow-md);z-index:1000000;position:fixed;top:50%;left:50%;transform:translate(-50%,-50%)}

/* If viewport is narrow or sidebar collapsed, center normally */
@media (max-width:1100px){
  .modal{left:50% !important;width:92% !important;max-width:720px !important}
}
.modal .close-button{background:none;border:none;font-size:22px;cursor:pointer}
.modal .modal-body{max-height:70vh;overflow:auto;padding:12px}
.modal .modal-header .btn-muted{margin-right:8px;padding:8px 10px;border-radius:8px}
.footer{max-width:1200px;margin:20px auto;padding:8px 16px;color:var(--muted);font-size:13px}
/* Import modal specific */
.modal .upload-section label{display:block;margin-bottom:6px;font-weight:600}
.import-status{margin:8px 0;font-size:13px;color:var(--muted)}
.import-preview{margin-top:10px;max-height:240px;overflow:auto;border:1px solid #eee;padding:8px;border-radius:8px;background:#fafafa}
.import-preview table{width:100%;border-collapse:collapse}
.import-preview th,.import-preview td{padding:6px;border-bottom:1px solid #f1f1f1;font-size:13px;text-align:left}
.import-preview thead th{font-weight:700;color:var(--brand-contrast)}
.import-preview .preview-note{font-size:12px;color:var(--muted);margin-top:6px}
.btn-success.hidden,.btn-primary.hidden{display:none}
/* utilities */
.hidden{display:none}

.import-preview table{width:100%;border-collapse:collapse}
.import-preview td{padding:8px;border-bottom:1px solid #f1f1f1}
.preview-row-ignored{background:#fff6f6}
.preview-row-accept{background:#f6fff6}
/* Unified status badge styles */
.status{padding:6px 10px;border-radius:8px;font-weight:700;display:inline-block}
.status-Pendente{background:#fff4e5;color:#b36b00}
.status-Aprovada{background:#e9f5e9;color:#1b7a1b}
.status-Rejeitada{background:#ffe9e9;color:#a00}
.status-Recebido{background:#e7f4ff;color:#0b5a88}

/* Permanent compact import panel */
.import-panel{position:fixed;bottom:20px;right:20px;width:420px;max-width:92%;background:var(--panel);border-radius:12px;padding:12px;box-shadow:0 10px 30px rgba(0,0,0,0.15);z-index:2147483647}
.import-panel .panel-header{display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:8px}
.import-panel .panel-header h3{margin:0;font-size:16px;color:var(--brand-contrast)}
.import-panel .panel-body label{display:block;margin-bottom:6px;font-weight:600}
.import-panel .close-button{background:none;border:none;font-size:18px;cursor:pointer}
.quotation-status-select{padding:6px 10px;border-radius:8px;border:1px solid #ddd;background:#fff;font-weight:700;min-width:120px}
.quotation-status-select.status-Pendente{background:#fff4e5;color:#b36b00}
.quotation-status-select.status-Aprovada{background:#e9f5e9;color:#1b7a1b}
.quotation-status-select.status-Rejeitada{background:#ffe9e9;color:#a00}
.quotation-status-select.status-Recebido{background:#e7f4ff;color:#0b5a88}
/* Carrinho styling */
#cartTable .btn-remove{background:var(--brand-light);color:#fff;border:none;padding:8px 10px;border-radius:8px}
#cartTable .btn-remove:hover{background:var(--brand-dark)}
#cartTable td{vertical-align:middle}
.cart-empty{color:var(--muted);padding:18px;text-align:center}
.company-card .obs{font-size:13px;color:var(--muted);margin-bottom:8px}

/* Produtos grid: limitar altura e cabeçalho fixo/mais bonito */
#sectionCadastrarProdutos .table-responsive{max-height:360px;overflow:auto;border:1px solid #eef4ee;border-radius:10px;padding:6px;background:linear-gradient(180deg,#ffffff,#fbfffb)}
#sectionCadastrarProdutos .data-grid{width:100%;border-collapse:collapse;margin:0}
#sectionCadastrarProdutos .data-grid thead th{position:sticky;top:0;background:linear-gradient(180deg,#fbfffb,#f3fef3);box-shadow:0 2px 6px rgba(0,0,0,0.04);z-index:4;padding:12px;font-weight:700;color:var(--brand-contrast);text-transform:uppercase;font-size:13px}
#sectionCadastrarProdutos .data-grid thead th:first-child{border-top-left-radius:8px}
#sectionCadastrarProdutos .data-grid thead th:last-child{border-top-right-radius:8px}
#sectionCadastrarProdutos .data-grid tbody td{padding:10px;border-bottom:1px solid #f1f1f1}
#sectionCadastrarProdutos .data-grid tbody td:last-child{white-space:nowrap; min-width:120px}
#sectionCadastrarProdutos .data-grid tbody tr:hover{background:#f8fff8}

/* Fornecedores grid: same styling as produtos (scroll + sticky header) */
#sectionCadastrarFornecedor .table-responsive{max-height:360px;overflow:auto;border:1px solid #eef4ee;border-radius:10px;padding:6px;background:linear-gradient(180deg,#ffffff,#fbfffb)}
#sectionCadastrarFornecedor .data-grid{width:100%;border-collapse:collapse;margin:0}
#sectionCadastrarFornecedor .data-grid thead th{position:sticky;top:0;background:linear-gradient(180deg,#fbfffb,#f3fef3);box-shadow:0 2px 6px rgba(0,0,0,0.04);z-index:4;padding:12px;font-weight:700;color:var(--brand-contrast);text-transform:uppercase;font-size:13px}

/* Make only data-field headers show pointer cursor for sorting */
.data-grid thead th[data-field]{cursor:pointer}
.data-grid thead th .sort-indicator{margin-left:8px;font-size:11px;opacity:0.8}
#sectionCadastrarFornecedor .data-grid thead th:first-child{border-top-left-radius:8px}
#sectionCadastrarFornecedor .data-grid thead th:last-child{border-top-right-radius:8px}
#sectionCadastrarFornecedor .data-grid tbody td{padding:10px;border-bottom:1px solid #f1f1f1}
#sectionCadastrarFornecedor .data-grid tbody td:last-child{white-space:nowrap}
#sectionCadastrarFornecedor .data-grid tbody tr:hover{background:#f8fff8}

/* Responsividade: empilha cards de fornecedores em telas pequenas */
@media (max-width:980px){
  .card-row{flex-direction:column}
  .card-row .company-card{width:100%}
}
/* small screens tweaks */
@media (max-width:600px){
  .btn-menu-compras span{display:none}
  #quotationCode{width:120px}
}

/* Estilos para o Painel Lateral Deslizante */
.panel-backdrop {
  position: fixed;
  inset: 0;
  background-color: rgba(0, 0, 0, 0.5);
  z-index: 1000;
  opacity: 0;
  transition: opacity 0.3s ease-in-out;
  pointer-events: none; /* Permite cliques através dele quando oculto */
}

.panel-backdrop:not(.hidden) {
  opacity: 1;
  pointer-events: auto; /* Bloqueia cliques quando visível */
}

.panel-lateral {
  position: fixed;
  top: 0;
  right: -500px; /* Começa fora da tela */
  width: 500px;
  max-width: 90%;
  height: 100%;
  background-color: var(--panel);
  box-shadow: -5px 0 15px rgba(0,0,0,0.1);
  transition: right 0.3s ease-in-out;
  display: flex;
  flex-direction: column;
}

.panel-backdrop:not(.hidden) .panel-lateral {
  right: 0; /* Desliza para a posição visível */
}

.panel-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 16px 20px;
  border-bottom: 1px solid #e9ecef;
}

.panel-header h2 {
  margin: 0;
  font-size: 1.2rem;
  color: var(--brand-contrast);
}

.panel-body {
  padding: 20px;
  overflow-y: auto;
  flex-grow: 1;
}

.recebimento-item {
  margin-bottom: 15px;
}
.recebimento-item label {
  display: block;
  margin-bottom: 5px;
  font-weight: 500;
}
.recebimento-item input {
  width: 100%;
  padding: 10px;
  border-radius: 8px;
  border: 1px solid #ddd;
}

.panel-footer {
  padding: 12px 20px;
  border-top: 1px solid #e9ecef;
  background-color: #f8f9fa;
  display: flex;
  justify-content: flex-end;
  gap: 10px;
}

/* Estilos para impressão */
@media print {
  .panel-backdrop {
    background: transparent !important;
    position: static !important;
  }
  .panel-lateral {
    position: static !important;
    width: 100% !important;
    max-width: none !important;
    height: auto !important;
    box-shadow: none !important;
    page-break-inside: avoid;
    page-break-before: avoid;
    page-break-after: avoid;
  }
  body * {
    visibility: hidden;
  }
  .panel-lateral, .panel-lateral * {
    visibility: visible;
  }
  .panel-footer {
    display: none;
  }
}
